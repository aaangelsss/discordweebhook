<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modern Discord Embed Sender</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            discord: {
              100: '#e3e6ff',
              200: '#c9ccff',
              300: '#aeb3ff',
              400: '#9499ff',
              500: '#5865F2',
              600: '#4752c4',
              700: '#363e97',
              800: '#252b69',
              900: '#14173c'
            }
          }
        }
      }
    }
  </script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      min-height: 100vh;
      color: #f1f5f9;
    }
    
    .card {
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(148, 163, 184, 0.1);
      border-radius: 16px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }
    
    .input-field {
      background: rgba(30, 41, 59, 0.6);
      border: 1px solid rgba(148, 163, 184, 0.2);
      transition: all 0.2s ease;
    }
    
    .input-field:focus {
      outline: none;
      border-color: #818cf8;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      transition: all 0.2s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
    }
    
    .btn-secondary {
      background: rgba(30, 41, 59, 0.8);
      transition: all 0.2s ease;
    }
    
    .btn-secondary:hover {
      background: rgba(51, 65, 85, 0.8);
    }
    
    .btn-danger {
      background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
      transition: all 0.2s ease;
    }
    
    .btn-danger:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
    }
    
    .section {
      background: rgba(30, 41, 59, 0.5);
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.1);
    }
    
    .floating-btn {
      position: absolute;
      top: -12px;
      right: 12px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    
    .floating-btn:hover {
      transform: scale(1.1);
    }
    
    .preview-card {
      background: #2b2d31;
      border-radius: 8px;
      border-left: 4px solid #5865F2;
    }
    
    .color-preview {
      width: 30px;
      height: 30px;
      border-radius: 4px;
      background: #5865F2;
    }
    
    .animate-pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    
    .field-badge {
      background: rgba(99, 102, 241, 0.15);
      border-radius: 4px;
      padding: 2px 6px;
      font-size: 0.75rem;
    }
    
    .preview-author {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .preview-author-icon {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      margin-right: 8px;
      background-color: #4f545c;
    }
    
    .preview-title {
      font-weight: 600;
      margin-bottom: 8px;
      color: #fff;
    }
    
    .preview-description {
      color: #dcddde;
      margin-bottom: 12px;
      line-height: 1.4;
    }
    
    .preview-field {
      margin-bottom: 8px;
    }
    
    .preview-field-name {
      font-weight: 600;
      color: #fff;
    }
    
    .preview-field-value {
      color: #dcddde;
    }
    
    .preview-footer {
      color: #72767d;
      font-size: 0.75rem;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid rgba(79,84,92,0.48);
    }
    
    .preview-image {
      max-width: 80px;
      max-height: 80px;
      border-radius: 4px;
      margin-top: 12px;
    }
  </style>
</head>
<body class="min-h-screen p-4 flex items-center justify-center">
  <div class="card max-w-4xl w-full p-6">
    <div class="flex items-center justify-between mb-8">
      <div>
        <h1 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-500">
          <i class="fab fa-discord mr-3"></i>Discord Embed Sender
        </h1>
        <p class="text-slate-400 mt-1">Create and send beautiful Discord embeds</p>
      </div>
      <div class="flex items-center space-x-2">
        <div class="w-3 h-3 rounded-full bg-green-500"></div>
        <span class="text-sm text-slate-400">Connected</span>
      </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <!-- Left Column: Input Form -->
      <div class="space-y-6">
        <!-- Webhook Section -->
        <div class="section p-5 relative">
          <div class="floating-btn bg-discord-500">
            <i class="fas fa-link text-xs text-white"></i>
          </div>
          <h2 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fas fa-hashtag mr-2 text-discord-400"></i>Webhook Configuration
          </h2>
          
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-1 text-slate-300">Webhook URL</label>
              <input id="webhookUrl" type="text" placeholder="https://discord.com/api/webhooks/..."
                class="input-field w-full p-3 rounded-lg text-slate-200 placeholder-slate-500 focus:ring-0" />
            </div>
            
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium mb-1 text-slate-300">Bot Username</label>
                <input id="botUsername" type="text" placeholder="Optional"
                  class="input-field w-full p-3 rounded-lg text-slate-200 placeholder-slate-500 focus:ring-0" />
              </div>
              <div>
                <label class="block text-sm font-medium mb-1 text-slate-300">Avatar URL</label>
                <input id="botAvatarUrl" type="text" placeholder="Optional"
                  class="input-field w-full p-3 rounded-lg text-slate-200 placeholder-slate-500 focus:ring-0" />
              </div>
            </div>
          </div>
        </div>

        <!-- Embed Content -->
        <div class="section p-5 relative">
          <div class="floating-btn bg-discord-500">
            <i class="fas fa-pen text-xs text-white"></i>
          </div>
          <h2 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fas fa-align-left mr-2 text-discord-400"></i>Embed Content
          </h2>
          
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-1 text-slate-300">Embed Title</label>
              <input id="embedTitle" type="text" placeholder="Your embed title here..."
                class="input-field w-full p-3 rounded-lg text-slate-200 placeholder-slate-500 focus:ring-0" 
                oninput="updatePreview()"/>
            </div>
            
            <div>
              <div class="flex justify-between items-center mb-1">
                <label class="block text-sm font-medium text-slate-300">Description</label>
                <button onclick="addDescription()" class="text-xs flex items-center text-discord-300 hover:text-discord-200">
                  <i class="fas fa-plus mr-1"></i> Add Section
                </button>
              </div>
              <div id="descriptionsContainer" class="space-y-3"></div>
            </div>
          </div>
        </div>

        <!-- Embed Styling -->
        <div class="section p-5 relative">
          <div class="floating-btn bg-discord-500">
            <i class="fas fa-palette text-xs text-white"></i>
          </div>
          <h2 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fas fa-brush mr-2 text-discord-400"></i>Embed Styling
          </h2>
          
          <div class="space-y-4">
            <div class="flex items-center">
              <label class="block text-sm font-medium mr-4 text-slate-300">Accent Color</label>
              <input id="embedColor" type="color" class="w-10 h-10 rounded-lg border-0 cursor-pointer" 
                     value="#5865F2" oninput="updateColorPreview()" />
              <div id="colorPreview" class="ml-2 color-preview"></div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="block text-sm font-medium mb-1 text-slate-300">Thumbnail URL</label>
                <input id="thumbnailUrl" type="text" placeholder="Optional"
                  class="input-field w-full p-3 rounded-lg text-slate-200 placeholder-slate-500 focus:ring-0" 
                  oninput="updatePreview()"/>
              </div>
              <div>
                <label class="block text-sm font-medium mb-1 text-slate-300">Author Icon URL</label>
                <input id="authorIcon" type="text" placeholder="Optional"
                  class="input-field w-full p-3 rounded-lg text-slate-200 placeholder-slate-500 focus:ring-0" 
                  oninput="updatePreview()"/>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column: Author/Footer, Fields, Actions -->
      <div class="space-y-6">
        <!-- Author & Footer -->
        <div class="section p-5 relative">
          <div class="floating-btn bg-discord-500">
            <i class="fas fa-user text-xs text-white"></i>
          </div>
          <h2 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fas fa-feather mr-2 text-discord-400"></i>Author & Footer
          </h2>
          
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium mb-1 text-slate-300">Author Name</label>
              <input id="authorName" type="text" placeholder="Optional"
                class="input-field w-full p-3 rounded-lg text-slate-200 placeholder-slate-500 focus:ring-0" 
                oninput="updatePreview()"/>
            </div>
            
            <div>
              <label class="block text-sm font-medium mb-1 text-slate-300">Footer Text</label>
              <input id="footerText" type="text" placeholder="Optional"
                class="input-field w-full p-3 rounded-lg text-slate-200 placeholder-slate-500 focus:ring-0" 
                oninput="updatePreview()"/>
            </div>
            
            <div class="flex items-center">
              <input id="includeTimestamp" type="checkbox" class="h-4 w-4 text-discord-500 rounded focus:ring-discord-500" 
                     onchange="updatePreview()"/>
              <label class="ml-2 text-sm text-slate-300">Include current timestamp</label>
            </div>
          </div>
        </div>

        <!-- Fields -->
        <div class="section p-5 relative">
          <div class="floating-btn bg-discord-500">
            <i class="fas fa-list text-xs text-white"></i>
          </div>
          <h2 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fas fa-table-cells mr-2 text-discord-400"></i>Embed Fields
            <span id="fieldCount" class="field-badge ml-2">0 fields</span>
          </h2>
          
          <div id="fieldsContainer" class="space-y-3 mb-4"></div>
          
          <button onclick="addField()" class="btn-secondary w-full py-2.5 rounded-lg flex items-center justify-center">
            <i class="fas fa-plus mr-2"></i> Add Field
          </button>
        </div>

        <!-- Preview -->
        <div class="section p-5 relative">
          <div class="floating-btn bg-discord-500">
            <i class="fas fa-eye text-xs text-white"></i>
          </div>
          <h2 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fas fa-desktop mr-2 text-discord-400"></i>Embed Preview
          </h2>
          
          <div class="preview-card p-4">
            <div id="embedPreview">
              <!-- Preview will be dynamically generated here -->
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
          <button onclick="sendEmbed()" class="btn-primary py-3 rounded-lg flex items-center justify-center">
            <i class="fas fa-paper-plane mr-2"></i> Send
          </button>
          <button onclick="saveCurrentEmbed()" class="btn-secondary py-3 rounded-lg flex items-center justify-center">
            <i class="fas fa-save mr-2"></i> Save
          </button>
          <button onclick="resetForm()" class="btn-secondary py-3 rounded-lg flex items-center justify-center">
            <i class="fas fa-undo mr-2"></i> Reset
          </button>
        </div>

        <!-- Saved Embeds -->
        <div class="section p-5">
          <h2 class="text-lg font-semibold mb-4 flex items-center">
            <i class="fas fa-bookmark mr-2 text-discord-400"></i>Saved Embeds
          </h2>
          
          <div class="flex space-x-2 mb-3">
            <select id="savedEmbeds" class="input-field flex-1 p-3 rounded-lg text-slate-200">
              <option value="">-- Select a saved embed --</option>
            </select>
            
            <button onclick="loadSelectedEmbed()" class="btn-secondary px-4 rounded-lg">
              <i class="fas fa-download"></i>
            </button>
          </div>
          
          <button onclick="deleteSelectedEmbed()" class="btn-danger w-full py-2.5 rounded-lg flex items-center justify-center">
            <i class="fas fa-trash mr-2"></i> Delete Selected
          </button>
        </div>
      </div>
    </div>
    
    <div id="status" class="text-center mt-6 p-3 rounded-lg bg-discord-800/30 text-discord-200 hidden">
      <i class="fas fa-circle-notch fa-spin mr-2"></i> <span id="statusText">Sending embed...</span>
    </div>
  </div>

  <script>
    // Initialize with one description field
    document.addEventListener('DOMContentLoaded', function() {
      addDescription();
      loadSavedEmbeds();
      updateFieldCount();
      updateColorPreview();
      updatePreview();
      
      // Add event listeners for dynamic preview
      document.querySelectorAll('input, textarea').forEach(el => {
        if (el.id !== 'embedColor') {
          el.addEventListener('input', updatePreview);
        }
      });
    });

    function addDescription(text = '') {
      const container = document.getElementById("descriptionsContainer");
      const div = document.createElement("div");
      div.className = "relative";
      div.innerHTML = `
        <textarea class="input-field w-full p-3 rounded-lg h-24 resize-none mb-1 text-slate-200" 
                  placeholder="Enter description text..."
                  oninput="updatePreview()">${text}</textarea>
        <button onclick="this.parentElement.remove(); updatePreview();" 
                class="absolute top-2 right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600">
          <i class="fas fa-times"></i>
        </button>
      `;
      container.appendChild(div);
    }

    function addField(name = '', value = '') {
      const container = document.getElementById("fieldsContainer");
      const fieldDiv = document.createElement("div");
      fieldDiv.className = "flex items-start gap-3";
      fieldDiv.innerHTML = `
        <div class="flex-1 space-y-1">
          <input type="text" placeholder="Field Name" value="${name}" 
                 class="input-field w-full p-2.5 rounded-lg text-slate-200 placeholder-slate-500"
                 oninput="updatePreview()" />
          <input type="text" placeholder="Field Value" value="${value}" 
                 class="input-field w-full p-2.5 rounded-lg text-slate-200 placeholder-slate-500"
                 oninput="updatePreview()" />
        </div>
        <button onclick="this.parentElement.remove(); updateFieldCount(); updatePreview();" 
                class="mt-2 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm hover:bg-red-600">
          <i class="fas fa-trash"></i>
        </button>
      `;
      container.appendChild(fieldDiv);
      updateFieldCount();
      updatePreview();
    }
    
    function updateFieldCount() {
      const count = document.querySelectorAll('#fieldsContainer > div').length;
      document.getElementById('fieldCount').textContent = `${count} field${count !== 1 ? 's' : ''}`;
    }
    
    function updateColorPreview() {
      const colorInput = document.getElementById('embedColor');
      const colorPreview = document.getElementById('colorPreview');
      colorPreview.style.backgroundColor = colorInput.value;
      updatePreview();
    }

    function sendEmbed() {
      const webhookUrl = document.getElementById("webhookUrl").value.trim();
      if (!webhookUrl) {
        showStatus("❌ Please enter a webhook URL", "error");
        return;
      }
      
      const username = document.getElementById("botUsername").value.trim();
      const avatarUrl = document.getElementById("botAvatarUrl").value.trim();
      const title = document.getElementById("embedTitle").value;
      const descriptionTexts = Array.from(document.querySelectorAll("#descriptionsContainer textarea"))
        .map(el => el.value.trim())
        .filter(text => text);
      const description = descriptionTexts.join("\n\n");
      const color = document.getElementById("embedColor").value.replace('#', '0x');
      const thumbnail = document.getElementById("thumbnailUrl").value;
      const authorName = document.getElementById("authorName").value;
      const authorIcon = document.getElementById("authorIcon").value;
      const footerText = document.getElementById("footerText").value;
      const includeTimestamp = document.getElementById("includeTimestamp").checked;

      const fields = Array.from(document.querySelectorAll("#fieldsContainer > div")).map(div => {
        const inputs = div.querySelectorAll("input");
        return { name: inputs[0].value, value: inputs[1].value, inline: false };
      }).filter(f => f.name && f.value);

      const embed = {
        title: title,
        description: description,
        color: parseInt(color),
        ...(thumbnail && { thumbnail: { url: thumbnail } }),
        ...(authorName && { author: { name: authorName, icon_url: authorIcon || undefined } }),
        ...(footerText && { footer: { text: footerText } }),
        ...(includeTimestamp && { timestamp: new Date().toISOString() }),
        ...(fields.length > 0 && { fields })
      };

      const payload = {
        embeds: [embed],
        ...(username && { username }),
        ...(avatarUrl && { avatar_url: avatarUrl })
      };

      const status = document.getElementById("status");
      const statusText = document.getElementById("statusText");
      status.classList.remove('hidden');
      statusText.innerHTML = '<i class="fas fa-circle-notch fa-spin mr-2"></i> Sending embed...';

      fetch(webhookUrl, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      })
      .then(res => {
        if (res.ok) {
          showStatus("✅ Embed sent successfully!", "success");
        } else {
          showStatus(`❌ Failed to send: ${res.status} ${res.statusText}`, "error");
        }
      })
      .catch(err => {
        showStatus("❌ Error: " + err.message, "error");
      });
    }
    
    function showStatus(message, type) {
      const status = document.getElementById("status");
      const statusText = document.getElementById("statusText");
      statusText.innerHTML = message;
      status.classList.remove('hidden');
      
      if (type === "success") {
        status.classList.add('bg-green-900/30');
        status.classList.add('text-green-400');
      } else {
        status.classList.add('bg-red-900/30');
        status.classList.add('text-red-400');
      }
      
      // Hide after 3 seconds
      setTimeout(() => {
        status.classList.add('hidden');
        status.classList.remove('bg-green-900/30', 'bg-red-900/30');
        status.classList.remove('text-green-400', 'text-red-400');
      }, 3000);
    }

    function saveCurrentEmbed() {
      const name = prompt("Name this embed:");
      if (!name) return;
      
      const fields = Array.from(document.querySelectorAll("#fieldsContainer > div")).map(div => {
        const inputs = div.querySelectorAll("input");
        return { name: inputs[0].value, value: inputs[1].value };
      });

      const descriptions = Array.from(document.querySelectorAll("#descriptionsContainer textarea"))
        .map(el => el.value);

      const embedData = {
        username: document.getElementById("botUsername").value,
        avatarUrl: document.getElementById("botAvatarUrl").value,
        title: document.getElementById("embedTitle").value,
        descriptions: descriptions,
        color: document.getElementById("embedColor").value,
        thumbnail: document.getElementById("thumbnailUrl").value,
        authorName: document.getElementById("authorName").value,
        authorIcon: document.getElementById("authorIcon").value,
        footerText: document.getElementById("footerText").value,
        timestamp: document.getElementById("includeTimestamp").checked,
        fields: fields
      };

      const saved = JSON.parse(localStorage.getItem("savedEmbeds") || "{}");
      saved[name] = embedData;
      localStorage.setItem("savedEmbeds", JSON.stringify(saved));
      loadSavedEmbeds();
      showStatus(`💾 Embed "${name}" saved successfully!`, "success");
    }

    function resetForm() {
      document.getElementById("webhookUrl").value = "";
      document.getElementById("botUsername").value = "";
      document.getElementById("botAvatarUrl").value = "";
      document.getElementById("embedTitle").value = "";
      document.getElementById("descriptionsContainer").innerHTML = "";
      document.getElementById("embedColor").value = "#5865F2";
      document.getElementById('colorPreview').style.backgroundColor = "#5865F2";
      document.getElementById("thumbnailUrl").value = "";
      document.getElementById("authorName").value = "";
      document.getElementById("authorIcon").value = "";
      document.getElementById("footerText").value = "";
      document.getElementById("includeTimestamp").checked = false;
      document.getElementById("fieldsContainer").innerHTML = "";
      updateFieldCount();
      
      // Add one description field back
      addDescription();
      
      showStatus("🔄 Form has been reset", "success");
      updatePreview();
    }

    function loadSavedEmbeds() {
      const select = document.getElementById("savedEmbeds");
      select.innerHTML = '<option value="">-- Select a saved embed --</option>';
      const saved = JSON.parse(localStorage.getItem("savedEmbeds") || "{}");
      for (const name in saved) {
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        select.appendChild(opt);
      }
    }

    function loadSelectedEmbed() {
      const name = document.getElementById("savedEmbeds").value;
      if (!name) return;
      const saved = JSON.parse(localStorage.getItem("savedEmbeds") || "{}");
      const data = saved[name];
      if (!data) return;
      
      document.getElementById("botUsername").value = data.username || "";
      document.getElementById("botAvatarUrl").value = data.avatarUrl || "";
      document.getElementById("embedTitle").value = data.title || "";
      document.getElementById("embedColor").value = data.color || "#5865F2";
      document.getElementById('colorPreview').style.backgroundColor = data.color || "#5865F2";
      document.getElementById("thumbnailUrl").value = data.thumbnail || "";
      document.getElementById("authorName").value = data.authorName || "";
      document.getElementById("authorIcon").value = data.authorIcon || "";
      document.getElementById("footerText").value = data.footerText || "";
      document.getElementById("includeTimestamp").checked = data.timestamp || false;

      // Clear and add descriptions
      document.getElementById("descriptionsContainer").innerHTML = "";
      (data.descriptions || [""]).forEach(desc => addDescription(desc));

      // Clear and add fields
      document.getElementById("fieldsContainer").innerHTML = "";
      (data.fields || []).forEach(f => addField(f.name, f.value));
      updateFieldCount();

      // Update preview
      updatePreview();
      
      showStatus(`📥 Loaded "${name}" embed`, "success");
    }

    function deleteSelectedEmbed() {
      const name = document.getElementById("savedEmbeds").value;
      if (!name) return;
      
      if (confirm(`Are you sure you want to delete the "${name}" embed?`)) {
        const saved = JSON.parse(localStorage.getItem("savedEmbeds") || "{}");
        delete saved[name];
        localStorage.setItem("savedEmbeds", JSON.stringify(saved));
        loadSavedEmbeds();
        showStatus(`🗑️ Deleted "${name}" embed`, "success");
      }
    }
    
    function updatePreview() {
      const previewContainer = document.getElementById("embedPreview");
      
      // Get values from form
      const title = document.getElementById("embedTitle").value;
      const descriptionTexts = Array.from(document.querySelectorAll("#descriptionsContainer textarea"))
        .map(el => el.value.trim())
        .filter(text => text);
      const description = descriptionTexts.join("\n\n");
      const color = document.getElementById("embedColor").value;
      const thumbnail = document.getElementById("thumbnailUrl").value;
      const authorName = document.getElementById("authorName").value;
      const authorIcon = document.getElementById("authorIcon").value;
      const footerText = document.getElementById("footerText").value;
      const includeTimestamp = document.getElementById("includeTimestamp").checked;
      
      const fields = Array.from(document.querySelectorAll("#fieldsContainer > div")).map(div => {
        const inputs = div.querySelectorAll("input");
        return { name: inputs[0].value, value: inputs[1].value };
      }).filter(f => f.name && f.value);
      
      // Build preview HTML
      let previewHTML = '';
      
      // Author section
      if (authorName) {
        previewHTML += `
          <div class="preview-author">
            ${authorIcon ? `<img src="${authorIcon}" class="preview-author-icon" />` : '<div class="preview-author-icon"></div>'}
            <div class="preview-author-name">${authorName}</div>
          </div>
        `;
      }
      
      // Title
      if (title) {
        previewHTML += `<div class="preview-title">${title}</div>`;
      }
      
      // Description
      if (description) {
        previewHTML += `<div class="preview-description">${description.replace(/\n/g, '<br>')}</div>`;
      }
      
      // Fields
      if (fields.length > 0) {
        previewHTML += '<div class="preview-fields">';
        fields.forEach(field => {
          previewHTML += `
            <div class="preview-field">
              <div class="preview-field-name">${field.name}</div>
              <div class="preview-field-value">${field.value}</div>
            </div>
          `;
        });
        previewHTML += '</div>';
      }
      
      // Thumbnail
      if (thumbnail) {
        previewHTML += `<img src="${thumbnail}" class="preview-image" />`;
      }
      
      // Footer
      let footerContent = '';
      if (footerText) {
        footerContent += footerText;
      }
      if (includeTimestamp) {
        const now = new Date();
        footerContent += footerText ? ' • ' : '';
        footerContent += now.toLocaleString();
      }
      
      if (footerContent) {
        previewHTML += `<div class="preview-footer">${footerContent}</div>`;
      }
      
      // Set border color to match selected color
      const previewCard = document.querySelector('.preview-card');
      previewCard.style.borderLeftColor = color;
      
      // Update preview container
      previewContainer.innerHTML = previewHTML || '<div class="text-slate-500 text-center py-4">Your embed preview will appear here</div>';
    }
  </script>
</body>
</html>
